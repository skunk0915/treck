# サイト更新・静的化ワークフロー

記事の編集や追加を行った後に、静的HTMLファイル（SSG）を生成し、サイトを更新するための手順です。

## 考え方（ローカルファースト）

サーバー上のファイル（特にタグ情報）とローカルのファイルの整合性を保つため、以下のワークフローを推奨します。

1.  **ローカルで編集**: 記事の執筆はローカルで行う。
2.  **ローカルでビルド**: `build.bat` を実行。これにより、**サーバーから最新のタグ情報を取得**した上で、静的HTMLが生成されます。
3.  **アップロード**: 生成された `index.html` や記事ディレクトリをサーバーにアップロードする。

※ サーバー上で直接再構築（`php debug.php`など）を行うと、ローカル側と状態が乖離したり、権限エラーが発生する可能性があるため、**再構築は常にローカルで行う**ことを基本とします。

## 手順

1.  **記事の編集・追加**
    *   `article/` ディレクトリ内のマークダウンファイル（`.md`）を編集、または新規作成します。
    *   画像の追加などは通常通り行います。

2.  **ビルドの実行**
    *   プロジェクト直下にある `build.bat` をダブルクリックして実行します。
    *   **注意**: 実行時にリモートサーバーから最新のタグ情報を自動的に取得します（インターネット接続が必要です）。
    *   黒い画面（コマンドプロンプト）が立ち上がり、タグ同期 -> ビルド処理の順で実行されます。
    *   "Local Build Complete" と表示されれば成功です。何かキーを押すと画面が閉じます。

3.  **確認**
    *   生成されたHTMLファイル（`index.html` や記事ディレクトリなど）が更新されていることを確認します。
    *   ローカルサーバー（VSCodeのLive Serverなど）で表示を確認することをお勧めします。

## トラブルシューティング

*   **ビルドエラーが出る場合**:
    *   PHPがインストールされているか、パスが通っているか確認してください。
    *   エラーメッセージの内容を確認し、修正してください。
*   **記事が表示されない場合**:
    *   記事のメタデータ（`published_at` や `status`）が公開設定になっているか確認してください。
